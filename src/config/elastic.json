{
  "elastic": {
    "enabled": false,
    "intervalMin": 2,
    "host": "elasticsearch:9200",
    "requestTimeout": 5000,
    "collections": [{
        "name": "cdr",
        "index": "cdr",
        "type": "collection",
        "fields": ["_id", "variables", "callflow"]
      }
    ],
    "templates": [
      {
        "name": "webitel",
        "body": {
          "template" : "cdr-*",
          "mappings": {
            "collection": {
              "dynamic_templates" : [
                {
                  "string_fields" : {
                    "path_match" : "variables.*",
                    "mapping" : {
                      "type" : "string",
                      "index" : "not_analyzed"
                    }
                  }
                },
                {
                  "notanalyzed": {
                    "match":              "*",
                    "match_mapping_type": "string",
                    "mapping": {
                      "type":        "string",
                      "index":       "not_analyzed"
                    }
                  }
                }
              ],
              "properties": {
                "Call start time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Call answer time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Call direction": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Hangup cause": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "User ID": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Destination User": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Q.850 Hangup Code": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Call duration in seconds": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Call duration": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Connected call duration in seconds": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Connected call duration": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Call end time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Bridge time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Progress time": {
                  "type": "date",
                  "format": "yyyy-MM-dd HH:mm:ss",
                  "index" : "not_analyzed"
                },
                "Agent ID": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Queue ID": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Destination number": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Call record in seconds": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "CallerID number": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Domain name": {
                  "type": "string",
                  "index" : "not_analyzed"
                },
                "Bridged": {
                  "type": "boolean",
                  "index" : "not_analyzed"
                },
                "PDD": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "Ring Duration": {
                  "type": "long",
                  "index" : "not_analyzed"
                },
                "callflow": {
                  "type": "nested",
                  "include_in_parent" : true,
                  "properties": {
                    "times": {
                      "type": "object",
                      "store" : "yes",
                      "properties": {
                        "created_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "profile_created_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "progress_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "progress_media_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "answered_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "bridged_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "last_hold_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "hold_accum_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "hangup_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "resurrect_time": {
                          "store" : "yes",
                          "type": "long"
                        },
                        "transfer_time": {
                          "store" : "yes",
                          "type": "long"
                        }
                      }
                    },
                    "caller_profile": {
                      "type": "object",
                      "store" : "yes",
                      "properties": {
                        "username": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "dialplan": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "caller_id_name": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "ani": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "caller_id_number": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "network_addr": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "destination_number": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "uuid": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "context": {
                          "store" : "yes",
                          "type": "string"
                        },
                        "chan_name": {
                          "store" : "yes",
                          "type": "string"
                        }
                      }
                    },
                    "dialplan": {
                      "type": "string"
                    }
                  }
                },
                "variables": {
                  "type": "object",
                  "properties": {
                    "start_stamp": {
                      "type": "date",
                      "format": "yyyy-MM-dd HH:mm:ss"
                    },
                    "answer_epoch": {
                      "type": "long"
                    },
                    "answer_uepoch": {
                      "type": "long"
                    },
                    "answermsec": {
                      "type": "long"
                    },
                    "answersec": {
                      "type": "long"
                    },
                    "answerusec": {
                      "type": "long"
                    },
                    "billmsec": {
                      "type": "long"
                    },
                    "billsec": {
                      "type": "long"
                    },
                    "billusec": {
                      "type": "long"
                    },
                    "bridge_epoch": {
                      "type": "long"
                    },
                    "bridge_uepoch": {
                      "type": "long"
                    },
                    "conference_member_id": {
                      "type": "long"
                    },
                    "duration": {
                      "type": "long"
                    },
                    "end_epoch": {
                      "type": "long"
                    },
                    "end_uepoch": {
                      "type": "long"
                    },
                    "flow_billmsec": {
                      "type": "long"
                    },
                    "flow_billsec": {
                      "type": "long"
                    },
                    "flow_billusec": {
                      "type": "long"
                    },
                    "hangup_cause_q850": {
                      "type": "long"
                    },
                    "hold_accum_ms": {
                      "type": "long"
                    },
                    "hold_accum_seconds": {
                      "type": "long"
                    },
                    "hold_accum_usec": {
                      "type": "long"
                    },
                    "last_hold_epoch": {
                      "type": "long"
                    },
                    "last_hold_uepoch": {
                      "type": "long"
                    },
                    "local_media_port": {
                      "type": "long"
                    },
                    "local_video_port": {
                      "type": "long"
                    },
                    "max_forwards": {
                      "type": "long"
                    },
                    "mduration": {
                      "type": "long"
                    },
                    "original_read_rate": {
                      "type": "long"
                    },
                    "playback_ms": {
                      "type": "long"
                    },
                    "playback_seconds": {
                      "type": "long"
                    },
                    "profile_start_epoch": {
                      "type": "long"
                    },
                    "profile_start_uepoch": {
                      "type": "long"
                    },
                    "progress_epoch": {
                      "type": "long"
                    },
                    "progress_media_epoch": {
                      "type": "long"
                    },
                    "progress_media_uepoch": {
                      "type": "long"
                    },
                    "progress_mediamsec": {
                      "type": "long"
                    },
                    "progress_mediasec": {
                      "type": "long"
                    },
                    "progress_mediausec": {
                      "type": "long"
                    },
                    "progress_uepoch": {
                      "type": "long"
                    },
                    "progressmsec": {
                      "type": "long"
                    },
                    "progressusec": {
                      "type": "long"
                    },
                    "read_rate": {
                      "type": "long"
                    },
                    "record_ms": {
                      "type": "long"
                    },
                    "record_seconds": {
                      "type": "long"
                    },
                    "remote_media_port": {
                      "type": "long"
                    },
                    "remote_video_port": {
                      "type": "long"
                    },
                    "sip_invite_failure_status": {
                      "type": "long"
                    },
                    "start_epoch": {
                      "type": "long"
                    },
                    "start_uepoch": {
                      "type": "long"
                    },
                    "uduration": {
                      "type": "long"
                    },
                    "video_read_rate": {
                      "type": "long"
                    },
                    "video_write_rate": {
                      "type": "long"
                    },
                    "waitmsec": {
                      "type": "long"
                    },
                    "waitsec": {
                      "type": "long"
                    },
                    "waitusec": {
                      "type": "long"
                    },
                    "write_rate": {
                      "type": "long"
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}